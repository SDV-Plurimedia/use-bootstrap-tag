"use strict";(()=>{var name="use-bootstrap-tag";function UseBootstrapTag(target){const{ubTagSeparator,ubTagDuplicate,ubTagTransform,ubTagEnter}=target.dataset,isDuplicate=ubTagDuplicate!==void 0,isEnter=ubTagEnter!==void 0,separator=ubTagSeparator||",",transform=ubTagTransform||"input => input",isDisabled=target.disabled;let tags=[];const classRoot=name,classWrapper="d-flex align-items-center gap-1 flex-wrap",classHidden="d-none",classInput="autowidth",classFocus="focus",classDisabled="disabled",classTag="d-inline-flex align-items-center gap-1 px-2 text-bg-secondary",xIcon='<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>';function createElement(e,t){const a=document.createElement(e);if(t){for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const n=t[s];a[s]=n}}return a}const nextElement=target.nextElementSibling;nextElement&&nextElement.classList.contains(classRoot)&&nextElement.remove();const root=createElement("div",{className:`${classRoot} ${classWrapper} ${target.classList.value}`});isDisabled&&root.classList.add(classDisabled);const input=createElement("input",{type:"text",className:classInput,placeholder:target.placeholder,disabled:isDisabled});input.addEventListener("input",()=>{autoWidth(),appendTag()}),root.append(input),target.insertAdjacentElement("afterend",root),target.classList.add(classHidden);const rootBorderRadius=Number.parseFloat(getComputedStyle(root).getPropertyValue("border-radius"))/16,tagBorderRadius=rootBorderRadius>.0625?rootBorderRadius-.0625:0;function autoWidth(){const e=document.createElement("canvas").getContext("2d"),t=input.value||input.placeholder||"";e.font=getComputedStyle(input).font,input.style.width=`${e.measureText(t).width}px`,e.canvas.remove()}function getValue(){return target.value.trim()}function getValues(){return getValue().split(separator)}function triggerChange(){target.dispatchEvent(new Event("change"))}function onExists(e){tags.forEach(t=>{e.includes(t.textContent)&&(t.style.transform="scale(1.1)",setTimeout(()=>{t.style.transform="none"},150))})}function setValue(e,t){target.value=e,triggerChange(),t&&t.length>0&&onExists(t)}function removeValue(e){const t=getValues();(Array.isArray(e)?e:[e]).forEach(s=>{const n=t.indexOf(s);n!==-1&&t.splice(n,1)}),setValue(t.join(separator))}function filter(e){return e.filter(t=>t.trim()!=="")}function createTag(e){const t=createElement("span",{className:`${classTag}${isDisabled?" bg-opacity-50":""}`,textContent:e});t.style.transition="transform .1s",tagBorderRadius>0&&(t.style.borderRadius=`${tagBorderRadius}rem`);const a=createElement("span",{className:"d-inline-flex",innerHTML:xIcon});return isDisabled||(t.style.cursor="default",a.style.cursor="pointer",a.onclick=()=>{removeValue(e)}),t.prepend(a),t}function getWrapperContent(){return filter(getValues()).map(createTag)}function toggleValidityClass(){const e=target.form;e&&(root.classList.remove("is-valid","is-invalid"),e.classList.contains("was-validated")&&root.classList.add(target.validity.valid?"is-valid":"is-invalid"))}function update(){input.value="",root.querySelectorAll("span").forEach(e=>e.remove()),autoWidth(),tags=[],getWrapperContent().reverse().forEach(e=>{root.prepend(e),tags.push(e)}),toggleValidityClass()}update();function addValue(e){const t=getValues();let a=filter(Array.isArray(e)?e:e.split(separator));const s=[];isDuplicate||(a.forEach(n=>{t.includes(n)&&!s.includes(n)&&s.push(n)}),a=a.filter(n=>!s.includes(n))),setValue(filter([...t,...a]).join(separator),s)}function appendTag(force=!1){const inputValue=input.value,value=eval(transform)(inputValue.trim());value===""&&(input.value="",autoWidth()),(inputValue.includes(separator)||force&&inputValue!=="")&&addValue(value)}function listen(){isDisabled||(root.addEventListener("click",()=>input.focus()),input.addEventListener("focus",()=>root.classList.add(classFocus)),input.addEventListener("blur",()=>{root.classList.remove(classFocus),appendTag(!0)}),input.addEventListener("keydown",t=>{const a=input.value,s=t.key;a===""&&s==="Backspace"&&input.previousElementSibling&&setValue(getValues().slice(0,-1).join(separator)),a!==""&&s==="Enter"&&isEnter&&(appendTag(!0),t.preventDefault())}));const e=target.form;e&&new MutationObserver(a=>{a.forEach(s=>{s.attributeName==="class"&&toggleValidityClass()})}).observe(e,{attributes:!0,attributeFilter:["class"]}),target.addEventListener("change",()=>update())}return listen(),{addValue,removeValue,getValue,getValues}}window.UseBootstrapTag=UseBootstrapTag})();
